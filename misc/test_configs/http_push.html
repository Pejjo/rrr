<!DOCTYPE HTML>

<html>
<head>
<title>RRR HTTP Push</title>
</head>
<body>

<div id="target"></div>

<script type="text/javascript">

var request_done = 1;
var handle = 1;

function sendRequest() {
	if (request_done) {
		request_done = 0;
		var ajax = new XMLHttpRequest();
		ajax.timeout = 5000;
		ajax.open("GET", "http://127.0.0.1:8000/?handle=1", 1);
		ajax.onreadystatechange = function() {
			try {
				if (ajax.readyState === XMLHttpRequest.DONE) {
					var status = ajax.status;
					if (status === 0 || (status >= 200 && status < 400)) {
						var obj = JSON.parse(ajax.responseText);
						document.getElementById("target").innerHTML += "<p>" + obj.content + "</p>";
					}
				}
			} catch (e) {}
			request_done = 1;
		}
		ajax.send();

	}
	setTimeout("sendRequest()", 50);
}

sendRequest();

</script>

</body>

</html>
