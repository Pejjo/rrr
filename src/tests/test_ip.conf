[instance_test_module]
module=test_module
test_method=test_array
test_output_instance=instance_buffer

[instance_buffer]
module=buffer
senders=instance_ip_6

[instance_ip]
module=ip
ip_input_types=be4#be4,be3#be3,be2s#be2s,be1u#be1u,sep1#sep1,le4#le4,le3#le3,le2s#le2s,le1u#le1u,sep2#sep2,blob8@2#blob8,msg#msg
ip_udp_port=2222

# Send the full message using TCP
[instance_ip_3]
module=ip
senders=instance_ip
wait_for=instance_ip_4
ip_target_port=2224
ip_target_host=localhost
ip_target_protocol=tcp
ip_force_target=yes
ip_send_rrr_msg_msg=yes

# Receive the full message using TCP
[instance_ip_4]
module=ip
ip_input_types=msg
ip_extract_rrr_msg_msgs=yes
ip_tcp_port=2224

# Pack the array from the message and send again with arbitary local port
[instance_ip_5]
module=ip
senders=instance_ip_4
wait_for=instance_ip_6
ip_force_target=yes
ip_target_port=2226
ip_target_host=localhost

# Receive and unpack the array into a new message
[instance_ip_6]
module=ip
ip_input_types=be8#be4,be8#be3,be8s#be2s,be8u#be1u,sep1#sep1,be8#le4,be8#le3,be8s#le2s,be8u#le1u,sep2#sep2,blob8@2#blob8,msg#msg
ip_udp_port=2226
